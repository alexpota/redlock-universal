<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>redlock-universal</title><meta name="description" content="Documentation for redlock-universal"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><script async src="assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">redlock-universal</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>redlock-universal</h1></div><div class="tsd-panel tsd-typography"><h1 id="redlock-universal" class="tsd-anchor-link">redlock-universal<a href="#redlock-universal" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><blockquote>
<p>Production-ready distributed Redis locks for Node.js with support for both
node-redis and ioredis</p>
</blockquote>
<p><a href="https://www.npmjs.com/package/redlock-universal"><img src="https://img.shields.io/npm/v/redlock-universal.svg" alt="npm version"></a>
<a href="https://nodejs.org/"><img src="https://img.shields.io/node/v/redlock-universal.svg" alt="Node.js"></a>
<a href="https://www.typescriptlang.org/"><img src="https://img.shields.io/badge/TypeScript-5.0+-blue.svg" alt="TypeScript"></a>
<a href="#testing"><img src="https://img.shields.io/badge/coverage-86%25-green.svg" alt="Test Coverage"></a>
<a href="./LICENSE"><img src="https://img.shields.io/badge/License-MIT-green.svg" alt="License: MIT"></a>
<a href="https://www.npmjs.com/package/redlock-universal"><img src="https://img.shields.io/npm/dm/redlock-universal.svg" alt="Downloads"></a></p>
<h2 id="overview" class="tsd-anchor-link">Overview<a href="#overview" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>redlock-universal implements distributed Redis locks using the
<a href="http://redis.io/topics/distlock">Redlock algorithm</a>. It supports both
node-redis and ioredis clients through a unified TypeScript API with automatic
lock extension capabilities.</p>
<h2 id="features" class="tsd-anchor-link">Features<a href="#features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>🔒 <strong>Distributed Locks</strong>: True Redlock algorithm for multi-instance Redis</li>
<li>🔌 <strong>Client Universal</strong>: Works with both <code>node-redis</code> v4+ and <code>ioredis</code> v5+</li>
<li>🤖 <strong>Auto-Extension</strong>: <code>using()</code> API with automatic lock extension for
long-running operations</li>
<li>📋 <strong>Structured Logging</strong>: Comprehensive Logger integration for production
observability</li>
<li>🏢 <strong>Production Ready</strong>: Circuit breakers, health checks, error handling, and
retries</li>
<li>🚀 <strong>TypeScript First</strong>: Full type safety and modern ESM support</li>
<li>⚡ <strong>Performance</strong>: Sub-millisecond lock acquisition (0.48ms mean), fastest
throughput among tested libraries (3300+ ops/sec)</li>
<li>📊 <strong>Enhanced Monitoring</strong>: Built-in metrics, health checks, and structured
logging</li>
<li>🧪 <strong>Tested</strong>: 86%+ test coverage with 456 unit, integration, and E2E tests</li>
</ul>
<h2 id="table-of-contents" class="tsd-anchor-link">Table of Contents<a href="#table-of-contents" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><a href="#quick-start">Quick Start</a></li>
<li><a href="#core-concepts">Core Concepts</a></li>
<li><a href="#api-reference">API Reference</a></li>
<li><a href="#auto-extension-with-using-api">Auto-Extension</a></li>
<li><a href="#examples">Examples</a></li>
<li><a href="#migration-guide">Migration Guide</a></li>
<li><a href="#faq">FAQ</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
</ul>
<h2 id="installation" class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">redlock-universal</span>
</code><button type="button">Copy</button></pre>

<p><strong>Peer Dependencies</strong>: Install your preferred Redis client</p>
<pre><code class="bash"><span class="hl-3"># For node-redis users</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">redis</span><br/><br/><span class="hl-3"># For ioredis users</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">ioredis</span><br/><br/><span class="hl-3"># Or both if you need mixed environments</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">redis</span><span class="hl-1"> </span><span class="hl-2">ioredis</span>
</code><button type="button">Copy</button></pre>

<h2 id="quick-start" class="tsd-anchor-link">Quick Start<a href="#quick-start" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="automatic-lock-management---the-easy-way" class="tsd-anchor-link">Automatic Lock Management - The Easy Way<a href="#automatic-lock-management---the-easy-way" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">createLock</span><span class="hl-1">, </span><span class="hl-5">NodeRedisAdapter</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;redlock-universal&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">createClient</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;redis&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">// Setup Redis client</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">client</span><span class="hl-1"> = </span><span class="hl-0">createClient</span><span class="hl-1">({ </span><span class="hl-5">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;redis://localhost:6379&#39;</span><span class="hl-1"> });</span><br/><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-0">connect</span><span class="hl-1">();</span><br/><br/><span class="hl-3">// Create lock</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">lock</span><span class="hl-1"> = </span><span class="hl-0">createLock</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">adapter:</span><span class="hl-1"> </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">NodeRedisAdapter</span><span class="hl-1">(</span><span class="hl-5">client</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-5">key:</span><span class="hl-1"> </span><span class="hl-2">&#39;my-resource&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">ttl:</span><span class="hl-1"> </span><span class="hl-8">30000</span><span class="hl-1">, </span><span class="hl-3">// 30 seconds</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Automatic lock management - the easy way</span><br/><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">lock</span><span class="hl-1">.</span><span class="hl-0">using</span><span class="hl-1">(</span><span class="hl-6">async</span><span class="hl-1"> </span><span class="hl-5">signal</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">processData</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-3">// Lock auto-extends if needed, releases automatically</span><br/><span class="hl-1">  </span><span class="hl-3">// Check signal.aborted if you need to know about extension failures</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<h3 id="traditional-approach-fine-control" class="tsd-anchor-link">Traditional Approach (Fine Control)<a href="#traditional-approach-fine-control" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">// Traditional approach (if you need fine control)</span><br/><span class="hl-4">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">handle</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">lock</span><span class="hl-1">.</span><span class="hl-0">acquire</span><span class="hl-1">();</span><br/><br/><span class="hl-1">  </span><span class="hl-3">// Critical section - only one process can be here</span><br/><span class="hl-1">  </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">doSomeCriticalWork</span><span class="hl-1">();</span><br/><br/><span class="hl-1">  </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">lock</span><span class="hl-1">.</span><span class="hl-0">release</span><span class="hl-1">(</span><span class="hl-5">handle</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-4">catch</span><span class="hl-1"> (</span><span class="hl-5">error</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&#39;Lock operation failed:&#39;</span><span class="hl-1">, </span><span class="hl-5">error</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="distributed-lock-multiple-redis-instances" class="tsd-anchor-link">Distributed Lock (Multiple Redis Instances)<a href="#distributed-lock-multiple-redis-instances" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">createRedlock</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">NodeRedisAdapter</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">IoredisAdapter</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;redlock-universal&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">createClient</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;redis&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> </span><span class="hl-5">Redis</span><span class="hl-1"> </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;ioredis&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">// Setup multiple Redis connections</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">clients</span><span class="hl-1"> = [</span><br/><span class="hl-1">  </span><span class="hl-0">createClient</span><span class="hl-1">({ </span><span class="hl-5">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;redis://redis1:6379&#39;</span><span class="hl-1"> }),</span><br/><span class="hl-1">  </span><span class="hl-0">createClient</span><span class="hl-1">({ </span><span class="hl-5">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;redis://redis2:6379&#39;</span><span class="hl-1"> }),</span><br/><span class="hl-1">  </span><span class="hl-0">createClient</span><span class="hl-1">({ </span><span class="hl-5">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;redis://redis3:6379&#39;</span><span class="hl-1"> }),</span><br/><span class="hl-1">];</span><br/><br/><span class="hl-3">// Connect all node-redis clients</span><br/><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-9">Promise</span><span class="hl-1">.</span><span class="hl-0">all</span><span class="hl-1">(</span><span class="hl-5">clients</span><span class="hl-1">.</span><span class="hl-0">map</span><span class="hl-1">(</span><span class="hl-5">client</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-0">connect</span><span class="hl-1">()));</span><br/><br/><span class="hl-3">// Create adapters (ioredis connects automatically)</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">adapters</span><span class="hl-1"> = [</span><br/><span class="hl-1">  </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">NodeRedisAdapter</span><span class="hl-1">(</span><span class="hl-5">clients</span><span class="hl-1">[</span><span class="hl-8">0</span><span class="hl-1">]),</span><br/><span class="hl-1">  </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">NodeRedisAdapter</span><span class="hl-1">(</span><span class="hl-5">clients</span><span class="hl-1">[</span><span class="hl-8">1</span><span class="hl-1">]),</span><br/><span class="hl-1">  </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">IoredisAdapter</span><span class="hl-1">(</span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Redis</span><span class="hl-1">(</span><span class="hl-2">&#39;redis://redis3:6379&#39;</span><span class="hl-1">)),</span><br/><span class="hl-1">];</span><br/><br/><span class="hl-3">// Create distributed lock</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">redlock</span><span class="hl-1"> = </span><span class="hl-0">createRedlock</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">adapters</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">key:</span><span class="hl-1"> </span><span class="hl-2">&#39;distributed-resource&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">ttl:</span><span class="hl-1"> </span><span class="hl-8">30000</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">quorum:</span><span class="hl-1"> </span><span class="hl-8">2</span><span class="hl-1">, </span><span class="hl-3">// Majority consensus</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Use distributed lock</span><br/><span class="hl-4">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">handle</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">redlock</span><span class="hl-1">.</span><span class="hl-0">acquire</span><span class="hl-1">();</span><br/><br/><span class="hl-1">  </span><span class="hl-3">// Critical section with distributed guarantee</span><br/><span class="hl-1">  </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">processPayment</span><span class="hl-1">();</span><br/><br/><span class="hl-1">  </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">redlock</span><span class="hl-1">.</span><span class="hl-0">release</span><span class="hl-1">(</span><span class="hl-5">handle</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-4">catch</span><span class="hl-1"> (</span><span class="hl-5">error</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&#39;Distributed lock failed:&#39;</span><span class="hl-1">, </span><span class="hl-5">error</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-4">finally</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">// Disconnect all clients</span><br/><span class="hl-1">  </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-9">Promise</span><span class="hl-1">.</span><span class="hl-0">all</span><span class="hl-1">(</span><span class="hl-5">clients</span><span class="hl-1">.</span><span class="hl-0">map</span><span class="hl-1">(</span><span class="hl-5">client</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-0">disconnect</span><span class="hl-1">()));</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h2 id="core-concepts" class="tsd-anchor-link">Core Concepts<a href="#core-concepts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="configuration-constants" class="tsd-anchor-link">Configuration Constants<a href="#configuration-constants" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><code>AUTO_EXTENSION_THRESHOLD_RATIO</code>: 0.2 - Extension triggers at 80% TTL consumed</li>
<li><code>ATOMIC_EXTENSION_SAFETY_BUFFER</code>: 2000ms - Minimum TTL for safe extension</li>
<li><code>MIN_EXTENSION_INTERVAL</code>: 100ms - Prevents rapid retry loops</li>
</ul>
<h2 id="api-reference" class="tsd-anchor-link">API Reference<a href="#api-reference" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="simple-lock" class="tsd-anchor-link">Simple Lock<a href="#simple-lock" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><h4 id="createlockconfig" class="tsd-anchor-link"><code>createLock(config)</code><a href="#createlockconfig" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Creates a simple lock for single Redis instance.</p>
<pre><code class="typescript"><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-9">CreateLockConfig</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">adapter</span><span class="hl-1">: </span><span class="hl-9">RedisAdapter</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">key</span><span class="hl-1">: </span><span class="hl-9">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">ttl</span><span class="hl-1">?: </span><span class="hl-9">number</span><span class="hl-1">; </span><span class="hl-3">// Default: 30000ms</span><br/><span class="hl-1">  </span><span class="hl-5">retryAttempts</span><span class="hl-1">?: </span><span class="hl-9">number</span><span class="hl-1">; </span><span class="hl-3">// Default: 3</span><br/><span class="hl-1">  </span><span class="hl-5">retryDelay</span><span class="hl-1">?: </span><span class="hl-9">number</span><span class="hl-1">; </span><span class="hl-3">// Default: 100ms</span><br/><span class="hl-1">  </span><span class="hl-5">performance</span><span class="hl-1">?: </span><span class="hl-2">&#39;standard&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;lean&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;enterprise&#39;</span><span class="hl-1">; </span><span class="hl-3">// Default: &#39;standard&#39;</span><br/><span class="hl-1">  </span><span class="hl-5">logger</span><span class="hl-1">?: </span><span class="hl-9">Logger</span><span class="hl-1">; </span><span class="hl-3">// See [Logger Configuration](#logger-integration)</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h4 id="lock-methods" class="tsd-anchor-link">Lock Methods<a href="#lock-methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-3">// Acquire lock</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">handle</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">lock</span><span class="hl-1">.</span><span class="hl-0">acquire</span><span class="hl-1">();</span><br/><br/><span class="hl-3">// Release lock</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">released</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">lock</span><span class="hl-1">.</span><span class="hl-0">release</span><span class="hl-1">(</span><span class="hl-5">handle</span><span class="hl-1">);</span><br/><br/><span class="hl-3">// Extend lock TTL</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">extended</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">lock</span><span class="hl-1">.</span><span class="hl-0">extend</span><span class="hl-1">(</span><span class="hl-5">handle</span><span class="hl-1">, </span><span class="hl-5">newTTL</span><span class="hl-1">);</span><br/><br/><span class="hl-3">// Check if locked</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">isLocked</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">lock</span><span class="hl-1">.</span><span class="hl-0">isLocked</span><span class="hl-1">(</span><span class="hl-5">key</span><span class="hl-1">);</span><br/><br/><span class="hl-3">// Auto-extending lock with routine execution (NEW!)</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">result</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">lock</span><span class="hl-1">.</span><span class="hl-0">using</span><span class="hl-1">(</span><span class="hl-6">async</span><span class="hl-1"> </span><span class="hl-5">signal</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">// Your long-running operation here</span><br/><span class="hl-1">  </span><span class="hl-3">// Lock automatically extends at 80% of TTL</span><br/><span class="hl-1">  </span><span class="hl-3">// Check signal.aborted if extension fails</span><br/><span class="hl-1">  </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-2">&#39;operation-result&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Advanced usage with abort signal checking</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">result</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">lock</span><span class="hl-1">.</span><span class="hl-0">using</span><span class="hl-1">(</span><span class="hl-6">async</span><span class="hl-1"> </span><span class="hl-5">signal</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">for</span><span class="hl-1"> (</span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-5">i</span><span class="hl-1"> = </span><span class="hl-8">0</span><span class="hl-1">; </span><span class="hl-5">i</span><span class="hl-1"> &lt; </span><span class="hl-8">1000</span><span class="hl-1">; </span><span class="hl-5">i</span><span class="hl-1">++) {</span><br/><span class="hl-1">    </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">processItem</span><span class="hl-1">(</span><span class="hl-5">i</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    </span><span class="hl-3">// Check for cancellation (e.g., if lock extension fails)</span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">signal</span><span class="hl-1">.</span><span class="hl-5">aborted</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Operation cancelled:&#39;</span><span class="hl-1">, </span><span class="hl-5">signal</span><span class="hl-1">.</span><span class="hl-5">error</span><span class="hl-1">?.</span><span class="hl-5">message</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">break</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-4">return</span><span class="hl-1"> { </span><span class="hl-5">processed:</span><span class="hl-1"> </span><span class="hl-5">i</span><span class="hl-1"> };</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<h4 id="performance-modes" class="tsd-anchor-link">Performance Modes<a href="#performance-modes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Choose the optimal performance mode for your use case:</p>
<pre><code class="typescript"><span class="hl-3">// Standard mode (default) - Full features with monitoring</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">lock</span><span class="hl-1"> = </span><span class="hl-0">createLock</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">adapter:</span><span class="hl-1"> </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">NodeRedisAdapter</span><span class="hl-1">(</span><span class="hl-5">client</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-5">key:</span><span class="hl-1"> </span><span class="hl-2">&#39;resource&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">performance:</span><span class="hl-1"> </span><span class="hl-2">&#39;standard&#39;</span><span class="hl-1">, </span><span class="hl-3">// Full monitoring, health checks</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Lean mode - Memory optimized for high-throughput scenarios</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">leanLock</span><span class="hl-1"> = </span><span class="hl-0">createLock</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">adapter:</span><span class="hl-1"> </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">NodeRedisAdapter</span><span class="hl-1">(</span><span class="hl-5">client</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-5">key:</span><span class="hl-1"> </span><span class="hl-2">&#39;resource&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">performance:</span><span class="hl-1"> </span><span class="hl-2">&#39;lean&#39;</span><span class="hl-1">, </span><span class="hl-3">// Saves ~150KB memory, 3% faster</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>Performance Mode Comparison:</strong></p>
<ul>
<li><strong>Standard</strong>: Full monitoring, health checks, comprehensive error details</li>
<li><strong>Lean</strong>: Memory-optimized, pre-allocated errors, minimal overhead</li>
<li><strong>Enterprise</strong>: Standard + circuit breakers + advanced observability (future)</li>
</ul>
<h4 id="logger-integration" class="tsd-anchor-link">Logger Integration<a href="#logger-integration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Configure structured logging for production observability:</p>
<pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">Logger</span><span class="hl-1">, </span><span class="hl-5">LogLevel</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;redlock-universal&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">// Create logger instance</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">logger</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Logger</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">level:</span><span class="hl-1"> </span><span class="hl-5">LogLevel</span><span class="hl-1">.</span><span class="hl-7">INFO</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">prefix:</span><span class="hl-1"> </span><span class="hl-2">&#39;redlock&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">enableConsole:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">, </span><span class="hl-3">// Console output</span><br/><span class="hl-1">  </span><span class="hl-5">enableCollection:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">, </span><span class="hl-3">// In-memory collection for metrics</span><br/><span class="hl-1">  </span><span class="hl-5">maxEntries:</span><span class="hl-1"> </span><span class="hl-8">1000</span><span class="hl-1">, </span><span class="hl-3">// Limit memory usage</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Single-instance lock with logger</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">lock</span><span class="hl-1"> = </span><span class="hl-0">createLock</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">adapter:</span><span class="hl-1"> </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">NodeRedisAdapter</span><span class="hl-1">(</span><span class="hl-5">client</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-5">key:</span><span class="hl-1"> </span><span class="hl-2">&#39;resource&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">ttl:</span><span class="hl-1"> </span><span class="hl-8">30000</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">logger</span><span class="hl-1">, </span><span class="hl-3">// Enhanced monitoring and error reporting</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Distributed lock with logger</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">redlock</span><span class="hl-1"> = </span><span class="hl-0">createRedlock</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">adapters:</span><span class="hl-1"> [</span><span class="hl-5">adapter1</span><span class="hl-1">, </span><span class="hl-5">adapter2</span><span class="hl-1">, </span><span class="hl-5">adapter3</span><span class="hl-1">],</span><br/><span class="hl-1">  </span><span class="hl-5">key:</span><span class="hl-1"> </span><span class="hl-2">&#39;distributed-resource&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">ttl:</span><span class="hl-1"> </span><span class="hl-8">30000</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">logger</span><span class="hl-1">, </span><span class="hl-3">// Distributed lock state tracking</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>Logger Configuration:</strong></p>
<pre><code class="typescript"><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-9">LoggerConfig</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">level</span><span class="hl-1">: </span><span class="hl-9">LogLevel</span><span class="hl-1">; </span><span class="hl-3">// DEBUG, INFO, WARN, ERROR</span><br/><span class="hl-1">  </span><span class="hl-5">prefix</span><span class="hl-1">?: </span><span class="hl-9">string</span><span class="hl-1">; </span><span class="hl-3">// Log prefix for identification</span><br/><span class="hl-1">  </span><span class="hl-5">enableConsole</span><span class="hl-1">?: </span><span class="hl-9">boolean</span><span class="hl-1">; </span><span class="hl-3">// Console output (default: true)</span><br/><span class="hl-1">  </span><span class="hl-5">enableCollection</span><span class="hl-1">?: </span><span class="hl-9">boolean</span><span class="hl-1">; </span><span class="hl-3">// In-memory collection (default: false)</span><br/><span class="hl-1">  </span><span class="hl-5">maxEntries</span><span class="hl-1">?: </span><span class="hl-9">number</span><span class="hl-1">; </span><span class="hl-3">// Max entries to keep (default: 100)</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>What Gets Logged:</strong></p>
<ul>
<li>✅ Lock acquisition attempts and failures</li>
<li>✅ Circuit breaker state changes (open/closed/half-open)</li>
<li>✅ Redis connection health checks and recovery</li>
<li>✅ Auto-extension successes and failures</li>
<li>✅ Redis adapter warnings (disconnect issues)</li>
<li>✅ Lock release errors and cleanup issues</li>
</ul>
<p><strong>Accessing Collected Logs:</strong></p>
<pre><code class="typescript"><span class="hl-3">// Get recent log entries for analysis</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">entries</span><span class="hl-1"> = </span><span class="hl-5">logger</span><span class="hl-1">.</span><span class="hl-0">getEntries</span><span class="hl-1">();</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Collected </span><span class="hl-6">${</span><span class="hl-5">entries</span><span class="hl-10">.</span><span class="hl-5">length</span><span class="hl-6">}</span><span class="hl-2"> log entries`</span><span class="hl-1">);</span><br/><br/><span class="hl-3">// Check for errors in the last hour</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">recentErrors</span><span class="hl-1"> = </span><span class="hl-5">entries</span><span class="hl-1">.</span><span class="hl-0">filter</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-5">entry</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-5">entry</span><span class="hl-1">.</span><span class="hl-5">level</span><span class="hl-1"> === </span><span class="hl-5">LogLevel</span><span class="hl-1">.</span><span class="hl-7">ERROR</span><span class="hl-1"> &amp;&amp; </span><span class="hl-5">entry</span><span class="hl-1">.</span><span class="hl-5">timestamp</span><span class="hl-1"> &gt; </span><span class="hl-5">Date</span><span class="hl-1">.</span><span class="hl-0">now</span><span class="hl-1">() - </span><span class="hl-8">3600000</span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h3 id="distributed-lock-redlock" class="tsd-anchor-link">Distributed Lock (RedLock)<a href="#distributed-lock-redlock" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><h4 id="createredlockconfig" class="tsd-anchor-link"><code>createRedlock(config)</code><a href="#createredlockconfig" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Creates a distributed lock using the Redlock algorithm.</p>
<pre><code class="typescript"><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-9">CreateRedlockConfig</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">adapters</span><span class="hl-1">: </span><span class="hl-9">RedisAdapter</span><span class="hl-1">[];</span><br/><span class="hl-1">  </span><span class="hl-5">key</span><span class="hl-1">: </span><span class="hl-9">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">ttl</span><span class="hl-1">?: </span><span class="hl-9">number</span><span class="hl-1">; </span><span class="hl-3">// Default: 30000ms</span><br/><span class="hl-1">  </span><span class="hl-5">quorum</span><span class="hl-1">?: </span><span class="hl-9">number</span><span class="hl-1">; </span><span class="hl-3">// Default: majority</span><br/><span class="hl-1">  </span><span class="hl-5">retryAttempts</span><span class="hl-1">?: </span><span class="hl-9">number</span><span class="hl-1">; </span><span class="hl-3">// Default: 3</span><br/><span class="hl-1">  </span><span class="hl-5">retryDelay</span><span class="hl-1">?: </span><span class="hl-9">number</span><span class="hl-1">; </span><span class="hl-3">// Default: 200ms</span><br/><span class="hl-1">  </span><span class="hl-5">clockDriftFactor</span><span class="hl-1">?: </span><span class="hl-9">number</span><span class="hl-1">; </span><span class="hl-3">// Default: 0.01</span><br/><span class="hl-1">  </span><span class="hl-5">logger</span><span class="hl-1">?: </span><span class="hl-9">Logger</span><span class="hl-1">; </span><span class="hl-3">// See [Logger Configuration](#logger-integration)</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="redis-adapters" class="tsd-anchor-link">Redis Adapters<a href="#redis-adapters" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><h4 id="node-redis-adapter" class="tsd-anchor-link">Node-Redis Adapter<a href="#node-redis-adapter" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">NodeRedisAdapter</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;redlock-universal&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">createClient</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;redis&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">client</span><span class="hl-1"> = </span><span class="hl-0">createClient</span><span class="hl-1">({ </span><span class="hl-5">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;redis://localhost:6379&#39;</span><span class="hl-1"> });</span><br/><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-0">connect</span><span class="hl-1">();</span><br/><br/><span class="hl-3">// Basic adapter</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">adapter</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">NodeRedisAdapter</span><span class="hl-1">(</span><span class="hl-5">client</span><span class="hl-1">);</span><br/><br/><span class="hl-3">// With logger support (NEW!)</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">adapter</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">NodeRedisAdapter</span><span class="hl-1">(</span><span class="hl-5">client</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-5">keyPrefix:</span><span class="hl-1"> </span><span class="hl-2">&#39;myapp:&#39;</span><span class="hl-1">, </span><span class="hl-3">// Optional key prefix</span><br/><span class="hl-1">  </span><span class="hl-5">timeout:</span><span class="hl-1"> </span><span class="hl-8">5000</span><span class="hl-1">, </span><span class="hl-3">// Redis operation timeout</span><br/><span class="hl-1">  </span><span class="hl-5">logger:</span><span class="hl-1"> </span><span class="hl-5">logger</span><span class="hl-1">, </span><span class="hl-3">// Structured logging for adapter operations</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<h4 id="ioredis-adapter" class="tsd-anchor-link">Ioredis Adapter<a href="#ioredis-adapter" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">IoredisAdapter</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;redlock-universal&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> </span><span class="hl-5">Redis</span><span class="hl-1"> </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;ioredis&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">client</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Redis</span><span class="hl-1">(</span><span class="hl-2">&#39;redis://localhost:6379&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-3">// Basic adapter</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">adapter</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">IoredisAdapter</span><span class="hl-1">(</span><span class="hl-5">client</span><span class="hl-1">);</span><br/><br/><span class="hl-3">// With logger support (NEW!)</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">adapter</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">IoredisAdapter</span><span class="hl-1">(</span><span class="hl-5">client</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-5">keyPrefix:</span><span class="hl-1"> </span><span class="hl-2">&#39;myapp:&#39;</span><span class="hl-1">, </span><span class="hl-3">// Optional key prefix</span><br/><span class="hl-1">  </span><span class="hl-5">timeout:</span><span class="hl-1"> </span><span class="hl-8">5000</span><span class="hl-1">, </span><span class="hl-3">// Redis operation timeout</span><br/><span class="hl-1">  </span><span class="hl-5">maxRetries:</span><span class="hl-1"> </span><span class="hl-8">3</span><span class="hl-1">, </span><span class="hl-3">// Redis operation retries</span><br/><span class="hl-1">  </span><span class="hl-5">retryDelay:</span><span class="hl-1"> </span><span class="hl-8">100</span><span class="hl-1">, </span><span class="hl-3">// Delay between retries</span><br/><span class="hl-1">  </span><span class="hl-5">logger:</span><span class="hl-1"> </span><span class="hl-5">logger</span><span class="hl-1">, </span><span class="hl-3">// Structured logging for adapter operations</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>Redis Adapter Options:</strong></p>
<pre><code class="typescript"><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-9">RedisAdapterOptions</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">keyPrefix</span><span class="hl-1">?: </span><span class="hl-9">string</span><span class="hl-1">; </span><span class="hl-3">// Prefix for all Redis keys</span><br/><span class="hl-1">  </span><span class="hl-5">maxRetries</span><span class="hl-1">?: </span><span class="hl-9">number</span><span class="hl-1">; </span><span class="hl-3">// Max retries for failed operations (default: 3)</span><br/><span class="hl-1">  </span><span class="hl-5">retryDelay</span><span class="hl-1">?: </span><span class="hl-9">number</span><span class="hl-1">; </span><span class="hl-3">// Delay between retries in ms (default: 100)</span><br/><span class="hl-1">  </span><span class="hl-5">timeout</span><span class="hl-1">?: </span><span class="hl-9">number</span><span class="hl-1">; </span><span class="hl-3">// Operation timeout in ms (default: 5000)</span><br/><span class="hl-1">  </span><span class="hl-5">logger</span><span class="hl-1">?: </span><span class="hl-9">Logger</span><span class="hl-1">; </span><span class="hl-3">// See [Logger Configuration](#logger-integration)</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>What Adapters Log:</strong></p>
<ul>
<li>⚠️ Redis disconnect warnings (connection cleanup issues)</li>
<li>🔄 Operation retries and timeouts</li>
<li>🚫 Validation errors (invalid keys, TTL values)</li>
<li>🔗 Connection health and status changes</li>
</ul>
<h3 id="factory-functions" class="tsd-anchor-link">Factory Functions<a href="#factory-functions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Convenient functions for creating multiple locks or specialized configurations:</p>
<pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">createLocks</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">createPrefixedLock</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">createRedlocks</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;redlock-universal&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">// Create multiple locks with shared configuration</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">locks</span><span class="hl-1"> = </span><span class="hl-0">createLocks</span><span class="hl-1">(</span><span class="hl-5">adapter</span><span class="hl-1">, [</span><span class="hl-2">&#39;user:123&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;account:456&#39;</span><span class="hl-1">], {</span><br/><span class="hl-1">  </span><span class="hl-5">ttl:</span><span class="hl-1"> </span><span class="hl-8">15000</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">retryAttempts:</span><span class="hl-1"> </span><span class="hl-8">5</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">performance:</span><span class="hl-1"> </span><span class="hl-2">&#39;lean&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Create lock with automatic key prefixing</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">userLock</span><span class="hl-1"> = </span><span class="hl-0">createPrefixedLock</span><span class="hl-1">(</span><span class="hl-5">adapter</span><span class="hl-1">, </span><span class="hl-2">&#39;locks:user:&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;123&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-5">ttl:</span><span class="hl-1"> </span><span class="hl-8">10000</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><span class="hl-3">// Results in key: &quot;locks:user:123&quot;</span><br/><br/><span class="hl-3">// Create multiple distributed locks</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">redlocks</span><span class="hl-1"> = </span><span class="hl-0">createRedlocks</span><span class="hl-1">(</span><br/><span class="hl-1">  [</span><span class="hl-5">adapter1</span><span class="hl-1">, </span><span class="hl-5">adapter2</span><span class="hl-1">, </span><span class="hl-5">adapter3</span><span class="hl-1">],</span><br/><span class="hl-1">  [</span><span class="hl-2">&#39;resource1&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;resource2&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-5">ttl:</span><span class="hl-1"> </span><span class="hl-8">15000</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">quorum:</span><span class="hl-1"> </span><span class="hl-8">2</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">retryAttempts:</span><span class="hl-1"> </span><span class="hl-8">5</span><span class="hl-1">,</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h2 id="advanced-usage" class="tsd-anchor-link">Advanced Usage<a href="#advanced-usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="lock-with-retry-logic" class="tsd-anchor-link">Lock with Retry Logic<a href="#lock-with-retry-logic" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">lock</span><span class="hl-1"> = </span><span class="hl-0">createLock</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">adapter:</span><span class="hl-1"> </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">NodeRedisAdapter</span><span class="hl-1">(</span><span class="hl-5">client</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-5">key:</span><span class="hl-1"> </span><span class="hl-2">&#39;contested-resource&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">ttl:</span><span class="hl-1"> </span><span class="hl-8">10000</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">retryAttempts:</span><span class="hl-1"> </span><span class="hl-8">5</span><span class="hl-1">, </span><span class="hl-3">// Retry up to 5 times</span><br/><span class="hl-1">  </span><span class="hl-5">retryDelay:</span><span class="hl-1"> </span><span class="hl-8">200</span><span class="hl-1">, </span><span class="hl-3">// Wait 200ms between retries</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<h3 id="lock-extension" class="tsd-anchor-link">Lock Extension<a href="#lock-extension" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">handle</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">lock</span><span class="hl-1">.</span><span class="hl-0">acquire</span><span class="hl-1">();</span><br/><br/><span class="hl-3">// Extend lock by 10 more seconds</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">extended</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">lock</span><span class="hl-1">.</span><span class="hl-0">extend</span><span class="hl-1">(</span><span class="hl-5">handle</span><span class="hl-1">, </span><span class="hl-8">10000</span><span class="hl-1">);</span><br/><br/><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">extended</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-3">// Continue working with extended lock</span><br/><span class="hl-1">  </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">longRunningTask</span><span class="hl-1">();</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">lock</span><span class="hl-1">.</span><span class="hl-0">release</span><span class="hl-1">(</span><span class="hl-5">handle</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h3 id="auto-extension-with-using-api" class="tsd-anchor-link">Auto-Extension with using() API<a href="#auto-extension-with-using-api" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>using()</code> method provides automatic lock management with auto-extension for
long-running operations. It handles lock acquisition, automatic extension when
needed, and guaranteed cleanup.</p>
<h4 id="simple-lock-auto-extension" class="tsd-anchor-link">Simple Lock Auto-Extension<a href="#simple-lock-auto-extension" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-3">// Auto-extending lock with routine execution</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">result</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">lock</span><span class="hl-1">.</span><span class="hl-0">using</span><span class="hl-1">(</span><span class="hl-6">async</span><span class="hl-1"> </span><span class="hl-5">signal</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">// Long-running operation - lock automatically extends at 80% of TTL</span><br/><span class="hl-1">  </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">processLargeDataset</span><span class="hl-1">();</span><br/><br/><span class="hl-1">  </span><span class="hl-3">// Check if extension failed (loss of lock)</span><br/><span class="hl-1">  </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">signal</span><span class="hl-1">.</span><span class="hl-5">aborted</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">throw</span><span class="hl-1"> </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Error</span><span class="hl-1">(</span><span class="hl-2">`Lock lost: </span><span class="hl-6">${</span><span class="hl-5">signal</span><span class="hl-10">.</span><span class="hl-5">error</span><span class="hl-10">?.</span><span class="hl-5">message</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-2">&#39;processing-complete&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-5">result</span><span class="hl-1">); </span><span class="hl-3">// &#39;processing-complete&#39;</span>
</code><button type="button">Copy</button></pre>

<h4 id="distributed-lock-auto-extension" class="tsd-anchor-link">Distributed Lock Auto-Extension<a href="#distributed-lock-auto-extension" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-3">// Distributed lock with quorum-based auto-extension</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">redlock</span><span class="hl-1"> = </span><span class="hl-0">createRedlock</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">adapters:</span><span class="hl-1"> [</span><span class="hl-5">adapter1</span><span class="hl-1">, </span><span class="hl-5">adapter2</span><span class="hl-1">, </span><span class="hl-5">adapter3</span><span class="hl-1">],</span><br/><span class="hl-1">  </span><span class="hl-5">key:</span><span class="hl-1"> </span><span class="hl-2">&#39;distributed-job&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">ttl:</span><span class="hl-1"> </span><span class="hl-8">30000</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">quorum:</span><span class="hl-1"> </span><span class="hl-8">2</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">result</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">redlock</span><span class="hl-1">.</span><span class="hl-0">using</span><span class="hl-1">(</span><span class="hl-6">async</span><span class="hl-1"> </span><span class="hl-5">signal</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">for</span><span class="hl-1"> (</span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">item</span><span class="hl-1"> </span><span class="hl-6">of</span><span class="hl-1"> </span><span class="hl-5">largeJobQueue</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">// Process each item - lock extends automatically</span><br/><span class="hl-1">    </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">processItem</span><span class="hl-1">(</span><span class="hl-5">item</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    </span><span class="hl-3">// Abort if quorum lost (majority of Redis nodes failed)</span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">signal</span><span class="hl-1">.</span><span class="hl-5">aborted</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">throw</span><span class="hl-1"> </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Error</span><span class="hl-1">(</span><span class="hl-2">`Distributed lock lost: </span><span class="hl-6">${</span><span class="hl-5">signal</span><span class="hl-10">.</span><span class="hl-5">error</span><span class="hl-10">?.</span><span class="hl-5">message</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-2">&#39;all-items-processed&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<h4 id="real-world-examples" class="tsd-anchor-link">Real-World Examples<a href="#real-world-examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>For implementation patterns including database transactions, cache warming, and
job processing, see the <a href="media/examples">examples directory</a>.</p>
<h3 id="error-handling" class="tsd-anchor-link">Error Handling<a href="#error-handling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">LockAcquisitionError</span><span class="hl-1">, </span><span class="hl-5">LockReleaseError</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;redlock-universal&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">handle</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">lock</span><span class="hl-1">.</span><span class="hl-0">acquire</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-3">// ... work ...</span><br/><span class="hl-1">  </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">lock</span><span class="hl-1">.</span><span class="hl-0">release</span><span class="hl-1">(</span><span class="hl-5">handle</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-4">catch</span><span class="hl-1"> (</span><span class="hl-5">error</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">error</span><span class="hl-1"> </span><span class="hl-6">instanceof</span><span class="hl-1"> </span><span class="hl-9">LockAcquisitionError</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&#39;Failed to acquire lock:&#39;</span><span class="hl-1">, </span><span class="hl-5">error</span><span class="hl-1">.</span><span class="hl-5">message</span><span class="hl-1">);</span><br/><span class="hl-1">  } </span><span class="hl-4">else</span><span class="hl-1"> </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">error</span><span class="hl-1"> </span><span class="hl-6">instanceof</span><span class="hl-1"> </span><span class="hl-9">LockReleaseError</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&#39;Failed to release lock:&#39;</span><span class="hl-1">, </span><span class="hl-5">error</span><span class="hl-1">.</span><span class="hl-5">message</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="multiple-resource-locking" class="tsd-anchor-link">Multiple Resource Locking<a href="#multiple-resource-locking" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">// Lock multiple resources in consistent order (avoid deadlocks)</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">userLock</span><span class="hl-1"> = </span><span class="hl-0">createLock</span><span class="hl-1">({ </span><span class="hl-5">adapter</span><span class="hl-1">, </span><span class="hl-5">key:</span><span class="hl-1"> </span><span class="hl-2">&#39;user:123&#39;</span><span class="hl-1"> });</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">accountLock</span><span class="hl-1"> = </span><span class="hl-0">createLock</span><span class="hl-1">({ </span><span class="hl-5">adapter</span><span class="hl-1">, </span><span class="hl-5">key:</span><span class="hl-1"> </span><span class="hl-2">&#39;account:456&#39;</span><span class="hl-1"> });</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">userHandle</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">userLock</span><span class="hl-1">.</span><span class="hl-0">acquire</span><span class="hl-1">();</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">accountHandle</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">accountLock</span><span class="hl-1">.</span><span class="hl-0">acquire</span><span class="hl-1">();</span><br/><br/><span class="hl-4">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">// Perform transaction requiring both resources</span><br/><span class="hl-1">  </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">transferFunds</span><span class="hl-1">();</span><br/><span class="hl-1">} </span><span class="hl-4">finally</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">// Release in reverse order</span><br/><span class="hl-1">  </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">accountLock</span><span class="hl-1">.</span><span class="hl-0">release</span><span class="hl-1">(</span><span class="hl-5">accountHandle</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">userLock</span><span class="hl-1">.</span><span class="hl-0">release</span><span class="hl-1">(</span><span class="hl-5">userHandle</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h2 id="best-practices" class="tsd-anchor-link">Best Practices<a href="#best-practices" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="1-always-use-try-finally-for-lock-release" class="tsd-anchor-link">1. Always Use Try-Finally for Lock Release<a href="#1-always-use-try-finally-for-lock-release" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">handle</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">lock</span><span class="hl-1">.</span><span class="hl-0">acquire</span><span class="hl-1">();</span><br/><span class="hl-4">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">doWork</span><span class="hl-1">();</span><br/><span class="hl-1">} </span><span class="hl-4">finally</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">lock</span><span class="hl-1">.</span><span class="hl-0">release</span><span class="hl-1">(</span><span class="hl-5">handle</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="2-choose-appropriate-ttl" class="tsd-anchor-link">2. Choose Appropriate TTL<a href="#2-choose-appropriate-ttl" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">// Short-lived operations</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">lock</span><span class="hl-1"> = </span><span class="hl-0">createLock</span><span class="hl-1">({ </span><span class="hl-5">adapter</span><span class="hl-1">, </span><span class="hl-5">key:</span><span class="hl-1"> </span><span class="hl-2">&#39;quick-task&#39;</span><span class="hl-1">, </span><span class="hl-5">ttl:</span><span class="hl-1"> </span><span class="hl-8">5000</span><span class="hl-1"> });</span><br/><br/><span class="hl-3">// Long-running operations</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">lock</span><span class="hl-1"> = </span><span class="hl-0">createLock</span><span class="hl-1">({ </span><span class="hl-5">adapter</span><span class="hl-1">, </span><span class="hl-5">key:</span><span class="hl-1"> </span><span class="hl-2">&#39;batch-job&#39;</span><span class="hl-1">, </span><span class="hl-5">ttl:</span><span class="hl-1"> </span><span class="hl-8">300000</span><span class="hl-1"> });</span>
</code><button type="button">Copy</button></pre>

<h3 id="3-handle-lock-contention" class="tsd-anchor-link">3. Handle Lock Contention<a href="#3-handle-lock-contention" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">lock</span><span class="hl-1"> = </span><span class="hl-0">createLock</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">adapter</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">key:</span><span class="hl-1"> </span><span class="hl-2">&#39;popular-resource&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">retryAttempts:</span><span class="hl-1"> </span><span class="hl-8">3</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">retryDelay:</span><span class="hl-1"> </span><span class="hl-8">100</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">handle</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">lock</span><span class="hl-1">.</span><span class="hl-0">acquire</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-3">// ... work ...</span><br/><span class="hl-1">} </span><span class="hl-4">catch</span><span class="hl-1"> (</span><span class="hl-5">error</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">error</span><span class="hl-1"> </span><span class="hl-6">instanceof</span><span class="hl-1"> </span><span class="hl-9">LockAcquisitionError</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">// Resource is busy, handle gracefully</span><br/><span class="hl-1">    </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">scheduleForLater</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="4-distributed-lock-quorum" class="tsd-anchor-link">4. Distributed Lock Quorum<a href="#4-distributed-lock-quorum" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">// For 5 Redis instances, use quorum of 3</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">redlock</span><span class="hl-1"> = </span><span class="hl-0">createRedlock</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">adapters:</span><span class="hl-1"> [</span><span class="hl-5">redis1</span><span class="hl-1">, </span><span class="hl-5">redis2</span><span class="hl-1">, </span><span class="hl-5">redis3</span><span class="hl-1">, </span><span class="hl-5">redis4</span><span class="hl-1">, </span><span class="hl-5">redis5</span><span class="hl-1">],</span><br/><span class="hl-1">  </span><span class="hl-5">quorum:</span><span class="hl-1"> </span><span class="hl-8">3</span><span class="hl-1">, </span><span class="hl-3">// Majority consensus</span><br/><span class="hl-1">  </span><span class="hl-5">key:</span><span class="hl-1"> </span><span class="hl-2">&#39;critical-resource&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<h2 id="monitoring-and-observability" class="tsd-anchor-link">Monitoring and Observability<a href="#monitoring-and-observability" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="lock-metadata" class="tsd-anchor-link">Lock Metadata<a href="#lock-metadata" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">// Access lock metadata</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">handle</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">lock</span><span class="hl-1">.</span><span class="hl-0">acquire</span><span class="hl-1">();</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Lock acquired in:&#39;</span><span class="hl-1">, </span><span class="hl-5">handle</span><span class="hl-1">.</span><span class="hl-5">metadata</span><span class="hl-1">.</span><span class="hl-5">acquisitionTime</span><span class="hl-1">, </span><span class="hl-2">&#39;ms&#39;</span><span class="hl-1">);</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Attempts required:&#39;</span><span class="hl-1">, </span><span class="hl-5">handle</span><span class="hl-1">.</span><span class="hl-5">metadata</span><span class="hl-1">.</span><span class="hl-5">attempts</span><span class="hl-1">);</span><br/><br/><span class="hl-3">// For distributed locks</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">redlockHandle</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">redlock</span><span class="hl-1">.</span><span class="hl-0">acquire</span><span class="hl-1">();</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Nodes locked:&#39;</span><span class="hl-1">, </span><span class="hl-5">redlockHandle</span><span class="hl-1">.</span><span class="hl-5">metadata</span><span class="hl-1">.</span><span class="hl-5">nodes</span><span class="hl-1">.</span><span class="hl-5">length</span><span class="hl-1">);</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Quorum achieved:&#39;</span><span class="hl-1">, </span><span class="hl-5">redlockHandle</span><span class="hl-1">.</span><span class="hl-5">metadata</span><span class="hl-1">.</span><span class="hl-5">nodes</span><span class="hl-1">.</span><span class="hl-5">length</span><span class="hl-1"> &gt;= </span><span class="hl-5">quorum</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h3 id="structured-logging-new" class="tsd-anchor-link">Structured Logging (NEW!)<a href="#structured-logging-new" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">Logger</span><span class="hl-1">, </span><span class="hl-5">LogLevel</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;redlock-universal&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">// Production logging setup</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">logger</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Logger</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">level:</span><span class="hl-1"> </span><span class="hl-5">LogLevel</span><span class="hl-1">.</span><span class="hl-7">INFO</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">prefix:</span><span class="hl-1"> </span><span class="hl-2">&#39;redlock&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">enableConsole:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">, </span><span class="hl-3">// For development</span><br/><span class="hl-1">  </span><span class="hl-5">enableCollection:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">, </span><span class="hl-3">// For metrics collection</span><br/><span class="hl-1">  </span><span class="hl-5">maxEntries:</span><span class="hl-1"> </span><span class="hl-8">1000</span><span class="hl-1">, </span><span class="hl-3">// Memory limit</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Configure locks with logger</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">lock</span><span class="hl-1"> = </span><span class="hl-0">createLock</span><span class="hl-1">({ </span><span class="hl-5">adapter</span><span class="hl-1">, </span><span class="hl-5">key:</span><span class="hl-1"> </span><span class="hl-2">&#39;resource&#39;</span><span class="hl-1">, </span><span class="hl-5">logger</span><span class="hl-1"> });</span><br/><br/><span class="hl-3">// Monitor lock operations</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">entries</span><span class="hl-1"> = </span><span class="hl-5">logger</span><span class="hl-1">.</span><span class="hl-0">getEntries</span><span class="hl-1">();</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">errors</span><span class="hl-1"> = </span><span class="hl-5">entries</span><span class="hl-1">.</span><span class="hl-0">filter</span><span class="hl-1">(</span><span class="hl-5">e</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-5">e</span><span class="hl-1">.</span><span class="hl-5">level</span><span class="hl-1"> === </span><span class="hl-5">LogLevel</span><span class="hl-1">.</span><span class="hl-7">ERROR</span><span class="hl-1">);</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">warnings</span><span class="hl-1"> = </span><span class="hl-5">entries</span><span class="hl-1">.</span><span class="hl-0">filter</span><span class="hl-1">(</span><span class="hl-5">e</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-5">e</span><span class="hl-1">.</span><span class="hl-5">level</span><span class="hl-1"> === </span><span class="hl-5">LogLevel</span><span class="hl-1">.</span><span class="hl-7">WARN</span><span class="hl-1">);</span><br/><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Lock errors: </span><span class="hl-6">${</span><span class="hl-5">errors</span><span class="hl-10">.</span><span class="hl-5">length</span><span class="hl-6">}</span><span class="hl-2">, Warnings: </span><span class="hl-6">${</span><span class="hl-5">warnings</span><span class="hl-10">.</span><span class="hl-5">length</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h3 id="architecture-improvements" class="tsd-anchor-link">Architecture Improvements<a href="#architecture-improvements" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>✅ <strong>Race condition protection</strong>: Atomic extension scripts eliminate timing
race conditions in auto-extension</li>
<li>✅ <strong>Consistent logging</strong>: All components use structured Logger instead of
mixed console.* calls</li>
<li>✅ <strong>Zero NODE_ENV checks</strong>: Production code no longer depends on environment
variables for behavior</li>
<li>✅ <strong>Configurable observability</strong>: Enable/disable console output and metrics
collection independently</li>
<li>✅ <strong>Enhanced context</strong>: All log entries include relevant context (keys,
correlation IDs, timestamps)</li>
<li>✅ <strong>Memory management</strong>: Built-in log rotation with configurable limits</li>
<li>✅ <strong>TTL feedback</strong>: Atomic operations provide real-time TTL information for
intelligent scheduling</li>
</ul>
<h2 id="performance" class="tsd-anchor-link">Performance<a href="#performance" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>redlock-universal delivers industry-leading performance:</p>
<ul>
<li><strong>Lock acquisition</strong>: 0.48ms mean latency (P95: 0.75ms) in lean mode</li>
<li><strong>Memory usage</strong>: &lt;2KB per operation (60% reduction via buffer pooling)</li>
<li><strong>Throughput</strong>: 3,329 ops/sec (42% faster than redis-semaphore, 95% faster than
node-redlock)</li>
<li><strong>Test coverage</strong>: 86%+ with 456 unit, integration, and E2E tests</li>
</ul>
<p>Performance modes:</p>
<ul>
<li><strong>Standard</strong> (default): Full monitoring and observability features</li>
<li><strong>Lean</strong>: Memory-optimized with minimal overhead for maximum speed</li>
<li><strong>Enterprise</strong>: Additional health checks and circuit breakers</li>
</ul>
<p><strong>Recent Optimizations (v0.6.5):</strong></p>
<ul>
<li>Buffer pooling reduces GC pressure by 60%</li>
<li>Fast-path optimizations for circuit breaker checks</li>
<li>Zero-allocation logging in production mode</li>
<li>51% faster lean mode vs standard mode</li>
</ul>
<h3 id="benchmarking" class="tsd-anchor-link">Benchmarking<a href="#benchmarking" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>We provide benchmarks to validate performance claims:</p>
<pre><code class="bash"><span class="hl-3"># Compare with leading Redis lock libraries</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">benchmark:competitive</span><br/><br/><span class="hl-3"># Internal performance validation</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">benchmark:performance</span><br/><br/><span class="hl-3"># Run all benchmarks</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">benchmark</span>
</code><button type="button">Copy</button></pre>

<p><strong>Benchmark Philosophy</strong>: We believe in honest, reproducible performance
testing. Our benchmarks:</p>
<ul>
<li>Test against real Redis instances (not mocks)</li>
<li>Include statistical analysis (mean, p50, p95, p99)</li>
<li>Acknowledge performance variability between runs</li>
<li>Focus on competitive positioning rather than absolute claims</li>
</ul>
<h2 id="comparison-with-alternatives" class="tsd-anchor-link">Comparison with Alternatives<a href="#comparison-with-alternatives" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><blockquote>
<p><strong>Methodology</strong>: This comparison uses data from npm registry (July 2025) and
architectural analysis. Performance estimates are based on implementation
patterns and Redis operation complexity.</p>
</blockquote>
<h3 id="feature-comparison" class="tsd-anchor-link">Feature Comparison<a href="#feature-comparison" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Feature</th>
<th>redlock-universal</th>
<th>node-redlock</th>
<th>redis-semaphore</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Client Support</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>node-redis v4+</td>
<td>✅ Native</td>
<td>❌</td>
<td>⚠️ Wrapper needed</td>
</tr>
<tr>
<td>ioredis v5+</td>
<td>✅ Native</td>
<td>✅ Required</td>
<td>✅ Native</td>
</tr>
<tr>
<td><strong>Language &amp; Developer Experience</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>TypeScript</td>
<td>✅ First-class</td>
<td>✅ Native</td>
<td>✅ Native</td>
</tr>
<tr>
<td>Modern ESM</td>
<td>✅</td>
<td>⚠️ CJS focus</td>
<td>✅</td>
</tr>
<tr>
<td>API Design</td>
<td>✅ Intuitive</td>
<td>⚠️ Complex</td>
<td>✅ Clean</td>
</tr>
<tr>
<td>Error Types</td>
<td>✅ Specific</td>
<td>✅ Basic</td>
<td>✅ Detailed</td>
</tr>
<tr>
<td><strong>Locking Capabilities</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Single Instance</td>
<td>✅ Optimized</td>
<td>❌</td>
<td>✅</td>
</tr>
<tr>
<td>Distributed (Redlock)</td>
<td>✅ Full spec</td>
<td>✅ Full spec</td>
<td>✅ RedlockMutex</td>
</tr>
<tr>
<td>Lock Extension</td>
<td>✅ Manual/Auto</td>
<td>✅ Watchdog</td>
<td>✅ Auto-refresh</td>
</tr>
<tr>
<td>Semaphores</td>
<td>❌ Planned</td>
<td>❌</td>
<td>✅ Advanced</td>
</tr>
<tr>
<td><strong>Production Features</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Retry Logic</td>
<td>✅ Configurable</td>
<td>✅ Built-in</td>
<td>✅ Fair queue</td>
</tr>
<tr>
<td>Monitoring</td>
<td>✅ Built-in</td>
<td>❌</td>
<td>❌</td>
</tr>
<tr>
<td>Health Checks</td>
<td>✅ Built-in</td>
<td>❌</td>
<td>❌</td>
</tr>
<tr>
<td>Structured Logging</td>
<td>✅ Built-in</td>
<td>❌</td>
<td>❌</td>
</tr>
</tbody>
</table>
<h3 id="technical-comparison-verified-data" class="tsd-anchor-link">Technical Comparison (Verified Data)<a href="#technical-comparison-verified-data" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Metric</th>
<th>redlock-universal</th>
<th>node-redlock</th>
<th>redis-semaphore</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Maintenance &amp; Adoption</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Weekly Downloads</td>
<td><em>New Package</em></td>
<td>644,599</td>
<td>282,020</td>
</tr>
<tr>
<td>Last Updated</td>
<td>2025 Active</td>
<td>Mar 2022 ⚠️</td>
<td>Mar 2025 ✅</td>
</tr>
<tr>
<td>Maintenance Status</td>
<td>✅ Active</td>
<td>⚠️ Stale (3y)</td>
<td>✅ Active</td>
</tr>
<tr>
<td><strong>Package Quality</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Runtime Dependencies</td>
<td>0 (peer only)</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>TypeScript Support</td>
<td>✅ Native</td>
<td>✅ Native</td>
<td>✅ Native</td>
</tr>
<tr>
<td>Test Coverage</td>
<td>85%+ Unit + Integration</td>
<td>Unknown</td>
<td>Unknown</td>
</tr>
<tr>
<td><strong>Performance Characteristics</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Lock Acquisition†</td>
<td><strong>0.48ms (P95: 0.75ms)</strong></td>
<td>~0.4-0.8ms</td>
<td>~0.4-0.6ms</td>
</tr>
<tr>
<td>Throughput (ops/sec)†</td>
<td><strong>3,329</strong></td>
<td>1,702</td>
<td>2,340</td>
</tr>
<tr>
<td>Memory per Operation†</td>
<td><strong>&lt;2KB</strong></td>
<td>~8KB</td>
<td>~6KB</td>
</tr>
</tbody>
</table>
<p><em>*Benchmarked on local Redis 7 (macOS, Node.js 22). <strong>Performance varies between
runs</strong> due to system load, network latency, and Redis configuration. All tested
libraries deliver competitive sub-millisecond performance. Focus on features and
reliability over micro-optimizations.</em></p>
<h3 id="maintenance-analysis" class="tsd-anchor-link">Maintenance Analysis<a href="#maintenance-analysis" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Package</th>
<th>Status</th>
<th>Assessment</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>node-redlock</strong></td>
<td>Last updated March 2022</td>
<td>Consider compatibility with newer Redis versions</td>
</tr>
<tr>
<td><strong>redis-semaphore</strong></td>
<td>Actively maintained</td>
<td>Good feature set, reliable choice</td>
</tr>
</tbody>
</table>
<h3 id="why-choose-redlock-universal" class="tsd-anchor-link">Why Choose redlock-universal?<a href="#why-choose-redlock-universal" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><h4 id="✅-universal-compatibility" class="tsd-anchor-link">✅ <strong>Universal Compatibility</strong><a href="#✅-universal-compatibility" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li><strong>Only library</strong> supporting both node-redis v4+ and ioredis v5+ natively</li>
<li><strong>Future-proof</strong>: Works with latest Redis client versions</li>
<li><strong>Migration-friendly</strong>: Easy to switch between Redis clients</li>
</ul>
<h4 id="✅-production-ready-observability" class="tsd-anchor-link">✅ <strong>Production-Ready Observability</strong><a href="#✅-production-ready-observability" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li><strong>Built-in metrics</strong>: Track lock performance, acquisition times, success rates</li>
<li><strong>Health monitoring</strong>: Redis connection health checks and statistics</li>
<li><strong>Structured logging</strong>: Configurable logging with context and levels</li>
<li><strong>Zero competitors</strong> offer these enterprise features</li>
</ul>
<h4 id="✅-modern-architecture--dx" class="tsd-anchor-link">✅ <strong>Modern Architecture &amp; DX</strong><a href="#✅-modern-architecture--dx" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li><strong>TypeScript-first</strong>: Strict typing, excellent IntelliSense</li>
<li><strong>ESM native</strong>: Modern module system with CommonJS compatibility</li>
<li><strong>Zero runtime dependencies</strong>: Security and supply chain safety</li>
<li><strong>Code quality</strong>: 85%+ test coverage with unit and integration tests</li>
</ul>
<h4 id="✅-proven-algorithm-implementation" class="tsd-anchor-link">✅ <strong>Proven Algorithm Implementation</strong><a href="#✅-proven-algorithm-implementation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li><strong>Redis-spec compliant</strong>: Follows official Redlock specification</li>
<li><strong>Clock drift handling</strong>: Proper time synchronization assumptions</li>
<li><strong>Fault tolerance</strong>: Graceful degradation on partial failures</li>
<li><strong>Performance optimized</strong>: Memory-efficient buffer pooling, sub-millisecond
acquisition, and highest throughput among tested libraries (verified benchmarks
included)</li>
</ul>
<h3 id="migration-guide" class="tsd-anchor-link">Migration Guide<a href="#migration-guide" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><h4 id="from-node-redlock" class="tsd-anchor-link">From node-redlock<a href="#from-node-redlock" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-3">// Before (node-redlock) - Stale for 3 years</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">redlock</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Redlock</span><span class="hl-1">([</span><span class="hl-5">redis1</span><span class="hl-1">, </span><span class="hl-5">redis2</span><span class="hl-1">], { </span><span class="hl-5">retryCount:</span><span class="hl-1"> </span><span class="hl-8">3</span><span class="hl-1"> });</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">resource</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">redlock</span><span class="hl-1">.</span><span class="hl-0">acquire</span><span class="hl-1">([</span><span class="hl-2">&#39;resource&#39;</span><span class="hl-1">], </span><span class="hl-8">30000</span><span class="hl-1">);</span><br/><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">redlock</span><span class="hl-1">.</span><span class="hl-0">release</span><span class="hl-1">(</span><span class="hl-5">resource</span><span class="hl-1">);</span><br/><br/><span class="hl-3">// After (redlock-universal) - Modern &amp; maintained</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">redlock</span><span class="hl-1"> = </span><span class="hl-0">createRedlock</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">adapters:</span><span class="hl-1"> [</span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">IoredisAdapter</span><span class="hl-1">(</span><span class="hl-5">redis1</span><span class="hl-1">), </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">IoredisAdapter</span><span class="hl-1">(</span><span class="hl-5">redis2</span><span class="hl-1">)],</span><br/><span class="hl-1">  </span><span class="hl-5">key:</span><span class="hl-1"> </span><span class="hl-2">&#39;resource&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">ttl:</span><span class="hl-1"> </span><span class="hl-8">30000</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">retryAttempts:</span><span class="hl-1"> </span><span class="hl-8">3</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">handle</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">redlock</span><span class="hl-1">.</span><span class="hl-0">acquire</span><span class="hl-1">();</span><br/><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">redlock</span><span class="hl-1">.</span><span class="hl-0">release</span><span class="hl-1">(</span><span class="hl-5">handle</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h4 id="from-redis-semaphore" class="tsd-anchor-link">From redis-semaphore<a href="#from-redis-semaphore" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-3">// Before (redis-semaphore) - Good but limited to ioredis</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">mutex</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Mutex</span><span class="hl-1">(</span><span class="hl-5">redis</span><span class="hl-1">, </span><span class="hl-2">&#39;resource&#39;</span><span class="hl-1">, { </span><span class="hl-5">acquireTimeout:</span><span class="hl-1"> </span><span class="hl-8">30000</span><span class="hl-1"> });</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">release</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">mutex</span><span class="hl-1">.</span><span class="hl-0">acquire</span><span class="hl-1">();</span><br/><span class="hl-0">release</span><span class="hl-1">();</span><br/><br/><span class="hl-3">// After (redlock-universal) - Universal client support + monitoring</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">lock</span><span class="hl-1"> = </span><span class="hl-0">createLock</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">adapter:</span><span class="hl-1"> </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">NodeRedisAdapter</span><span class="hl-1">(</span><span class="hl-5">nodeRedisClient</span><span class="hl-1">), </span><span class="hl-3">// or IoredisAdapter</span><br/><span class="hl-1">  </span><span class="hl-5">key:</span><span class="hl-1"> </span><span class="hl-2">&#39;resource&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">ttl:</span><span class="hl-1"> </span><span class="hl-8">30000</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">handle</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">lock</span><span class="hl-1">.</span><span class="hl-0">acquire</span><span class="hl-1">();</span><br/><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">lock</span><span class="hl-1">.</span><span class="hl-0">release</span><span class="hl-1">(</span><span class="hl-5">handle</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h2 id="testing" class="tsd-anchor-link">Testing<a href="#testing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="bash"><span class="hl-3"># Run unit tests</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">test</span><br/><br/><span class="hl-3"># Run integration tests (requires Redis)</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">test:integration</span><br/><br/><span class="hl-3"># Run all tests with coverage</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">test:coverage</span><br/><br/><span class="hl-3"># Run Docker-based tests</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">test:docker</span>
</code><button type="button">Copy</button></pre>

<h2 id="faq" class="tsd-anchor-link">FAQ<a href="#faq" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p><strong>Q: What's the performance overhead of auto-extension?</strong>
A: Minimal - typically &lt;1ms using atomic operations.</p>
<p><strong>Q: How does this handle Redis restarts?</strong>
A: Lua scripts auto-reload on NOSCRIPT errors, no action needed.</p>
<p><strong>Q: SimpleLock vs RedLock?</strong>
A: SimpleLock = single Redis (faster). RedLock = multiple Redis (fault-tolerant).</p>
<h2 id="troubleshooting" class="tsd-anchor-link">Troubleshooting<a href="#troubleshooting" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="common-issues" class="tsd-anchor-link">Common Issues<a href="#common-issues" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>Lock not releasing:</strong></p>
<ul>
<li>Ensure the lock handle matches the stored value</li>
<li>Check if TTL expired before release attempt</li>
<li>Verify Redis connectivity</li>
</ul>
<p><strong>Auto-extension not working:</strong></p>
<ul>
<li>Verify ATOMIC_EXTENSION_SAFETY_BUFFER is defined (2000ms default)</li>
<li>Check that TTL is long enough for your operation</li>
<li>Monitor the AbortSignal for extension failures</li>
</ul>
<p><strong>Circuit breaker opening frequently:</strong></p>
<ul>
<li>Increase timeout values</li>
<li>Check Redis server performance</li>
<li>Review network latency</li>
</ul>
<p><strong>&quot;NOSCRIPT&quot; errors:</strong></p>
<ul>
<li>Redis flushed Lua script cache</li>
<li>Library automatically reloads scripts</li>
<li>No action needed, but indicates Redis restart</li>
</ul>
<p><strong>Connection timeouts:</strong></p>
<ul>
<li>Check Redis maxclients setting</li>
<li>Review connection pool configuration</li>
<li>Monitor network latency between app and Redis</li>
</ul>
<h2 id="examples" class="tsd-anchor-link">Examples<a href="#examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Quick examples are shown above. For detailed implementations:</p>
<p><strong>Real-World Patterns:</strong></p>
<ul>
<li><a href="media/database-transactions.ts">Database Transactions</a> - Transaction safety patterns</li>
<li><a href="media/cache-warming.ts">Distributed Cache Warming</a> - Distributed cache coordination</li>
<li><a href="media/job-processing.ts">Job Processing with Progress</a> - Long-running job management</li>
</ul>
<p><strong>Core Usage:</strong></p>
<ul>
<li><a href="media/simple-lock-usage.ts">Simple Lock Usage</a> - Basic locking patterns</li>
<li><a href="media/redlock-usage.ts">Distributed Lock (RedLock)</a> - Multi-instance coordination</li>
<li><a href="media/lock-extension.ts">Lock Extension Patterns</a> - Manual extension strategies</li>
<li><a href="media/lock-with-retry.ts">Retry Strategies</a> - Contention handling</li>
<li><a href="media/monitoring.ts">Monitoring &amp; Observability</a> - Production monitoring</li>
<li><a href="media/adapter-usage.ts">Adapter Usage</a> - Redis client integration</li>
</ul>
<h2 id="contributing" class="tsd-anchor-link">Contributing<a href="#contributing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>We welcome contributions! Please see our <a href="media/CONTRIBUTING.md">Contributing Guide</a>
for details.</p>
<ol>
<li>Fork the repository</li>
<li>Create your feature branch (<code>git checkout -b feature/amazing-feature</code>)</li>
<li>Commit your changes (<code>git commit -m 'Add amazing feature'</code>)</li>
<li>Push to the branch (<code>git push origin feature/amazing-feature</code>)</li>
<li>Open a Pull Request</li>
</ol>
<h2 id="license" class="tsd-anchor-link">License<a href="#license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p><a href="media/LICENSE">MIT</a> © Alex Potapenko</p>
<h2 id="support" class="tsd-anchor-link">Support<a href="#support" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>📖 <a href="./docs">Documentation</a></li>
<li>🐛 <a href="https://github.com/alexpota/redlock-universal/issues">Issue Tracker</a></li>
<li>💬 <a href="https://github.com/alexpota/redlock-universal/discussions">Discussions</a></li>
</ul>
<hr>
<p>Made with ❤️ for the Node.js community</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#redlock-universal"><span>redlock-<wbr/>universal</span></a><ul><li><a href="#overview"><span>Overview</span></a></li><li><a href="#features"><span>Features</span></a></li><li><a href="#table-of-contents"><span>Table of <wbr/>Contents</span></a></li><li><a href="#installation"><span>Installation</span></a></li><li><a href="#quick-start"><span>Quick <wbr/>Start</span></a></li><li><ul><li><a href="#automatic-lock-management---the-easy-way"><span>Automatic <wbr/>Lock <wbr/>Management -<wbr/> <wbr/>The <wbr/>Easy <wbr/>Way</span></a></li><li><a href="#traditional-approach-fine-control"><span>Traditional <wbr/>Approach (<wbr/>Fine <wbr/>Control)</span></a></li><li><a href="#distributed-lock-multiple-redis-instances"><span>Distributed <wbr/>Lock (<wbr/>Multiple <wbr/>Redis <wbr/>Instances)</span></a></li></ul></li><li><a href="#core-concepts"><span>Core <wbr/>Concepts</span></a></li><li><ul><li><a href="#configuration-constants"><span>Configuration <wbr/>Constants</span></a></li></ul></li><li><a href="#api-reference"><span>API <wbr/>Reference</span></a></li><li><ul><li><a href="#simple-lock"><span>Simple <wbr/>Lock</span></a></li><li><ul><li><a href="#createlockconfig"><span>create<wbr/>Lock(config)</span></a></li><li><a href="#lock-methods"><span>Lock <wbr/>Methods</span></a></li><li><a href="#performance-modes"><span>Performance <wbr/>Modes</span></a></li><li><a href="#logger-integration"><span>Logger <wbr/>Integration</span></a></li></ul></li><li><a href="#distributed-lock-redlock"><span>Distributed <wbr/>Lock (<wbr/>Red<wbr/>Lock)</span></a></li><li><ul><li><a href="#createredlockconfig"><span>create<wbr/>Redlock(config)</span></a></li></ul></li><li><a href="#redis-adapters"><span>Redis <wbr/>Adapters</span></a></li><li><ul><li><a href="#node-redis-adapter"><span>Node-<wbr/>Redis <wbr/>Adapter</span></a></li><li><a href="#ioredis-adapter"><span>Ioredis <wbr/>Adapter</span></a></li></ul></li><li><a href="#factory-functions"><span>Factory <wbr/>Functions</span></a></li></ul></li><li><a href="#advanced-usage"><span>Advanced <wbr/>Usage</span></a></li><li><ul><li><a href="#lock-with-retry-logic"><span>Lock with <wbr/>Retry <wbr/>Logic</span></a></li><li><a href="#lock-extension"><span>Lock <wbr/>Extension</span></a></li><li><a href="#auto-extension-with-using-api"><span>Auto-<wbr/>Extension with using() <wbr/>API</span></a></li><li><ul><li><a href="#simple-lock-auto-extension"><span>Simple <wbr/>Lock <wbr/>Auto-<wbr/>Extension</span></a></li><li><a href="#distributed-lock-auto-extension"><span>Distributed <wbr/>Lock <wbr/>Auto-<wbr/>Extension</span></a></li><li><a href="#real-world-examples"><span>Real-<wbr/>World <wbr/>Examples</span></a></li></ul></li><li><a href="#error-handling"><span>Error <wbr/>Handling</span></a></li><li><a href="#multiple-resource-locking"><span>Multiple <wbr/>Resource <wbr/>Locking</span></a></li></ul></li><li><a href="#best-practices"><span>Best <wbr/>Practices</span></a></li><li><ul><li><a href="#1-always-use-try-finally-for-lock-release"><span>1. <wbr/>Always <wbr/>Use <wbr/>Try-<wbr/>Finally for <wbr/>Lock <wbr/>Release</span></a></li><li><a href="#2-choose-appropriate-ttl"><span>2. <wbr/>Choose <wbr/>Appropriate <wbr/>TTL</span></a></li><li><a href="#3-handle-lock-contention"><span>3. <wbr/>Handle <wbr/>Lock <wbr/>Contention</span></a></li><li><a href="#4-distributed-lock-quorum"><span>4. <wbr/>Distributed <wbr/>Lock <wbr/>Quorum</span></a></li></ul></li><li><a href="#monitoring-and-observability"><span>Monitoring and <wbr/>Observability</span></a></li><li><ul><li><a href="#lock-metadata"><span>Lock <wbr/>Metadata</span></a></li><li><a href="#structured-logging-new"><span>Structured <wbr/>Logging (<wbr/>NEW!)</span></a></li><li><a href="#architecture-improvements"><span>Architecture <wbr/>Improvements</span></a></li></ul></li><li><a href="#performance"><span>Performance</span></a></li><li><ul><li><a href="#benchmarking"><span>Benchmarking</span></a></li></ul></li><li><a href="#comparison-with-alternatives"><span>Comparison with <wbr/>Alternatives</span></a></li><li><ul><li><a href="#feature-comparison"><span>Feature <wbr/>Comparison</span></a></li><li><a href="#technical-comparison-verified-data"><span>Technical <wbr/>Comparison (<wbr/>Verified <wbr/>Data)</span></a></li><li><a href="#maintenance-analysis"><span>Maintenance <wbr/>Analysis</span></a></li><li><a href="#why-choose-redlock-universal"><span>Why <wbr/>Choose redlock-<wbr/>universal?</span></a></li><li><ul><li><a href="#✅-universal-compatibility"><span>✅ <wbr/>Universal <wbr/>Compatibility</span></a></li><li><a href="#✅-production-ready-observability"><span>✅ <wbr/>Production-<wbr/>Ready <wbr/>Observability</span></a></li><li><a href="#✅-modern-architecture--dx"><span>✅ <wbr/>Modern <wbr/>Architecture &amp; <wbr/>DX</span></a></li><li><a href="#✅-proven-algorithm-implementation"><span>✅ <wbr/>Proven <wbr/>Algorithm <wbr/>Implementation</span></a></li></ul></li><li><a href="#migration-guide"><span>Migration <wbr/>Guide</span></a></li><li><ul><li><a href="#from-node-redlock"><span>From node-<wbr/>redlock</span></a></li><li><a href="#from-redis-semaphore"><span>From redis-<wbr/>semaphore</span></a></li></ul></li></ul></li><li><a href="#testing"><span>Testing</span></a></li><li><a href="#faq"><span>FAQ</span></a></li><li><a href="#troubleshooting"><span>Troubleshooting</span></a></li><li><ul><li><a href="#common-issues"><span>Common <wbr/>Issues</span></a></li></ul></li><li><a href="#examples"><span>Examples</span></a></li><li><a href="#contributing"><span>Contributing</span></a></li><li><a href="#license"><span>License</span></a></li><li><a href="#support"><span>Support</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">redlock-universal</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
